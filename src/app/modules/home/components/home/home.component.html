<div class="container">
  <h1>Download survey results</h1>
  <app-select [handler]="this" class="row network search_field"></app-select>
  <!-- <app-search [handler]="this" class="row network search_field"></app-search> -->
  <div id="collapseSurvey" [ngbCollapse]="showDownloadView">
    <div class="row app-home">
      <div class="col-12">
        <hr>
      </div>

      <app-download-button #downloadCSV
        [handler]="this"
        [title]="'Download CSV'"
        (click)="getSurveysCsv(registrations.id)"
        [buttonTitle]="'Registrations'"
        [kind]="'csv'"
        class="col-12 col-md-6"></app-download-button>
      
      <app-download-button #downloadZIP
        [handler]="this"
        [title]="'Download ZIP'"
        (click)="getSurveysZip(registrations.id)"
        [buttonTitle]="'Registrations and Subforms'"
        [kind]="'archive'"
        class="col-12 col-md-6"></app-download-button>

      <div class="col-12 col-md-12 item" style="padding-top: 25px"><H5>
        Images: <code [innerHTML]="surveyName()"></code></H5>
      </div>
      <p>
          <ngb-alert *ngIf="successMessage" type="success" (close)="successMessage = null">
            {{ successMessage }}
          </ngb-alert>
      </p>
      <ag-grid-angular
        style="width: 100%; height: 750px; overflow:hidden;"
        id="myGrid"
        class="ag-theme-material"
        [columnDefs]="columnDefs"
        [rowData]="rowData"
        [defaultColDef]="defaultColDef"
        [enableRangeSelection]="true"
        (gridReady)="onGridReady($event)"
        [getRowNodeId]="getRowNodeId"
        [rowSelection]="rowSelection"
        [animateRows]="true"
        [context]="context"
        [frameworkComponents]="frameworkComponents"
      >
      </ag-grid-angular>
    </div>
  </div>
</div>
